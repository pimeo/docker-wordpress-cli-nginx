# |--------------------------------------------------------------------------
# | Tasks
# |--------------------------------------------------------------------------
# |
# | This file describes the tasks of the project.
# |
# | https://github.com/gulien/orbit/
# |

tasks:

  # |--------------------------------------------------------------------------
  # | orbit run generate_nginx_https_conf
  # |--------------------------------------------------------------------------
  # |
  # | Generates all Nginx configuration for HTTP only support
  # |

  - use: generate_nginx_http_conf
    short: Generates nginx config file
    run:
      - orbit generate -f utils/nginx-http.conf.blueprint -o nginx-conf/nginx.conf -p "Values,.env"
      {{ if eq "darwin" os }}
      - |-
          sed -i '' '1 i \
          # DO NOT EDIT THIS FILE Make yours changes in utils/nginx-http.conf.blueprint' nginx-conf/nginx.conf
      {{ else }}
      - |-
         sed -i '1i\# DO NOT EDIT THIS FILE Make yours changes in utils/nginx-http.conf.blueprint' nginx-conf/nginx.conf
      {{ end }}

  # |--------------------------------------------------------------------------
  # | orbit run generate_nginx_https_conf
  # |--------------------------------------------------------------------------
  # |
  # | Generates all Nginx configuration for HTTP only support
  # |

  - use: generate_nginx_https_conf
    short: Generates nginx config file
    run:
      - orbit generate -f utils/nginx-https.conf.blueprint -o nginx-conf/nginx.conf -p "Values,.env"
      {{ if eq "darwin" os }}
      - |-
          sed -i '' '1 i \
          # DO NOT EDIT THIS FILE Make yours changes in utils/nginx-https.conf.blueprint' nginx-conf/nginx.conf
      {{ else }}
      - |-
         sed -i '1i\# DO NOT EDIT THIS FILE Make yours changes in utils/nginx-https.conf.blueprint' nginx-conf/nginx.conf
      {{ end }}